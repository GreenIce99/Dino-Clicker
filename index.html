<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dino Clicker Deluxe</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#27ae60" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
    * { box-sizing: border-box; }
    body {
      font-family: 'Press Start 2P', cursive;
      background: linear-gradient(to bottom, #2c3e50, #27ae60);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      text-align: center;
    }
    h1 {
      font-size: 1.5rem;
      margin-bottom: 10px;
    }
    #clicker {
      font-size: 4rem;
      background: #1abc9c;
      border: none;
      border-radius: 50%;
      width: 150px;
      height: 150px;
      cursor: pointer;
      box-shadow: 0 0 20px #16a085;
      transition: transform 0.1s;
    }
    #clicker:active {
      transform: scale(0.95);
    }
    .stats, .upgrades, .achievements, .boosts {
      margin-top: 20px;
      max-width: 400px;
      background: rgba(0, 0, 0, 0.3);
      padding: 15px;
      border-radius: 10px;
    }
    button {
      font-family: inherit;
      margin-top: 10px;
      padding: 10px;
      font-size: 0.8rem;
      border: none;
      background: #2980b9;
      color: #fff;
      cursor: pointer;
      border-radius: 5px;
    }
    button:disabled {
      background: #555;
      cursor: not-allowed;
    }
    .popup {
      background: #e67e22;
      color: #fff;
      padding: 5px 10px;
      margin-top: 5px;
      border-radius: 5px;
      animation: fade 3s forwards;
    }
    @keyframes fade {
      0% { opacity: 1; }
      100% { opacity: 0; display: none; }
    }
    #evoBar {
      width: 100%;
      background: #444;
      border-radius: 8px;
      margin-top: 10px;
      overflow: hidden;
    }
    #evoProgress {
      height: 12px;
      background: lime;
      width: 0%;
      transition: width 0.3s ease-in-out;
    }
  </style>
</head>
<body>
  <h1>Dino Clicker Deluxe 🦖</h1>
  <audio id="bgMusic" loop src="https://cdn.pixabay.com/audio/2022/03/15/audio_3d4f051418.mp3"></audio>
  <audio id="clickSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_545a313343.mp3"></audio>
  <button id="clicker">🦴</button>
  <div class="stats">
    <p id="bones">Bones: 0</p>
    <p id="xp">XP: 0 | Level: 1</p>
    <div id="evoBar"><div id="evoProgress"></div></div>
    <p id="bpc">Bones/Click: 1</p>
    <p id="totalClicks">Total Clicks: 0</p>
  </div>
  <div class="upgrades">
    <h3>Upgrades</h3>
    <button id="upgradeClick">Upgrade Claws (+1 BPC) - 20 Bones</button><br>
    <button id="autoClicker">Hire Dino Worker (Auto +1/sec) - 100 Bones</button>
  </div>
  <div class="boosts">
    <h3>Boosts</h3>
    <button id="doubleBoost">2x Bones (30s)</button>
    <p id="boostTimer"></p>
    <button onclick="toggleMusic()">🎵 Toggle Music</button>
  </div>
  <div class="achievements">
    <h3>Achievements</h3>
    <div id="achievementList"></div>
  </div>
  <div id="popupArea"></div>
  <script>
    let bones = 0, xp = 0, level = 1, bonesPerClick = 1, totalClicks = 0;
    let upgradeCost = 20, autoCost = 100;
    let doubleBoost = false, boostCooldown = false;
    let autoRate = 0, autoInterval;

    const clicker = document.getElementById('clicker');
    const bonesEl = document.getElementById('bones');
    const xpEl = document.getElementById('xp');
    const bpcEl = document.getElementById('bpc');
    const clicksEl = document.getElementById('totalClicks');
    const upgradeBtn = document.getElementById('upgradeClick');
    const autoBtn = document.getElementById('autoClicker');
    const boostBtn = document.getElementById('doubleBoost');
    const boostTimer = document.getElementById('boostTimer');
    const achievements = document.getElementById('achievementList');
    const popupArea = document.getElementById('popupArea');
    const music = document.getElementById('bgMusic');
    const clickSound = document.getElementById('clickSound');
    const evoProgress = document.getElementById('evoProgress');

    const achievementList = [
      { id: 'click10', text: 'First 10 Clicks!', unlocked: false, condition: () => totalClicks >= 10 },
      { id: 'bones100', text: '100 Bones Collected!', unlocked: false, condition: () => bones >= 100 },
      { id: 'level5', text: 'Reached Level 5!', unlocked: false, condition: () => level >= 5 }
    ];

    function updateDisplay() {
      bonesEl.textContent = `Bones: ${bones}`;
      xpEl.textContent = `XP: ${xp} | Level: ${level}`;
      bpcEl.textContent = `Bones/Click: ${bonesPerClick}`;
      clicksEl.textContent = `Total Clicks: ${totalClicks}`;
      upgradeBtn.textContent = `Upgrade Claws (+1 BPC) - ${upgradeCost} Bones`;
      autoBtn.textContent = `Hire Dino Worker (Auto +${autoRate + 1}/sec) - ${autoCost} Bones`;
      upgradeBtn.disabled = bones < upgradeCost;
      autoBtn.disabled = bones < autoCost;
      evoProgress.style.width = `${(xp / (level * 10)) * 100}%`;
    }

    function showPopup(text) {
      const div = document.createElement('div');
      div.className = 'popup';
      div.textContent = text;
      popupArea.appendChild(div);
      setTimeout(() => popupArea.removeChild(div), 3000);
    }

    function checkAchievements() {
      achievementList.forEach(ach => {
        if (!ach.unlocked && ach.condition()) {
          ach.unlocked = true;
          const p = document.createElement('p');
          p.textContent = ach.text;
          achievements.appendChild(p);
          showPopup(`🏆 Achievement: ${ach.text}`);
        }
      });
    }

    function gainXP(amount) {
      xp += amount;
      if (xp >= level * 10) {
        xp = 0;
        level++;
        bonesPerClick++;
        showPopup(`🦖 Evolved to Level ${level}!`);
      }
    }

    function randomEvent() {
      if (Math.random() < 0.05) {
        const bonus = Math.floor(Math.random() * 50 + 25);
        bones += bonus;
        showPopup(`🌠 Meteor Shower! +${bonus} Bones`);
      }
    }

    clicker.addEventListener('click', () => {
      const earned = bonesPerClick * (doubleBoost ? 2 : 1);
      bones += earned;
      totalClicks++;
      gainXP(1);
      updateDisplay();
      checkAchievements();
      randomEvent();
      clickSound.play();
    });

    upgradeBtn.addEventListener('click', () => {
      if (bones >= upgradeCost) {
        bones -= upgradeCost;
        bonesPerClick++;
        upgradeCost = Math.floor(upgradeCost * 1.5);
        updateDisplay();
      }
    });

    autoBtn.addEventListener('click', () => {
      if (bones >= autoCost) {
        bones -= autoCost;
        autoRate++;
        autoCost = Math.floor(autoCost * 1.75);
        clearInterval(autoInterval);
        autoInterval = setInterval(() => {
          bones += autoRate * (doubleBoost ? 2 : 1);
          gainXP(autoRate);
          updateDisplay();
          checkAchievements();
        }, 1000);
        updateDisplay();
      }
    });

    boostBtn.addEventListener('click', () => {
      if (boostCooldown) return;
      doubleBoost = true;
      boostCooldown = true;
      boostBtn.disabled = true;
      let time = 30;
      boostTimer.textContent = `Boost active: ${time}s left`;
      const interval = setInterval(() => {
        time--;
        boostTimer.textContent = `Boost active: ${time}s left`;
        if (time <= 0) {
          clearInterval(interval);
          doubleBoost = false;
          boostTimer.textContent = '';
          setTimeout(() => {
            boostCooldown = false;
            boostBtn.disabled = false;
          }, 30000);
        }
      }, 1000);
    });

    function toggleMusic() {
      if (music.paused) music.play();
      else music.pause();
    }

    window.addEventListener('load', () => {
      updateDisplay();
      music.volume = 0.3;
      music.play().catch(() => {}); // Autoplay might be blocked
    });
  </script>
</body>
</html>
